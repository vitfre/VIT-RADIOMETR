/*
 * LD.c
 *
 * Created: 11.02.2014 17:33:24
 *  Author: Администратор
 */ 

#include "main.h"

//****************************************************************************************
// External Interrupt 0 service routine
//****************************************************************************************
ISR (INT0_vect)
{
	//---------------------------------------------------------------------------------------
	IMP_SET
	count++;
	//---------------------------------------------------------------------------------------
	return;
};
//****************************************************************************************
// Timer0 overflow interrupt service routine
//****************************************************************************************
ISR (TIMER0_OVF_vect)
{
	//---------------------------------------------------------------------------------------
	// Reinitialize Timer0 value
	TCNT0=0x06;
	//---------------------------------------------------------------------------------------
	BUT_Debrief();
	//---------------------------------------------------------------------------------------
	return;
};
//****************************************************************************************
// Timer1 overflow interrupt service routine
//****************************************************************************************
ISR (TIMER1_OVF_vect)
{
	//---------------------------------------------------------------------------------------
	// Reinitialize Timer1 value
	TCNT1H=0xC2;
	TCNT1L=0xF7;
	//---------------------------------------------------------------------------------------
	PUMP_CONV
	//uart_write(count>>8);
	//uart_write(count);
	//uart_write(0x00);
	//count=0x00;
	//---------------------------------------------------------------------------------------
	return;
};

//****************************************************************************************
// Analog Comparator interrupt service routine
//****************************************************************************************
ISR(ANA_COMP_vect)
{
	/*на всякий случай сброс  флага прерывания */
    //ACSR |=(1<<ACI);
	//---------------------------------------------------------------------------------------
	PUMP_CONV
	
	//---------------------------------------------------------------------------------------
	return;
};


int main(void)
{
	init_mcu();
	BUT_Init();
	//SEG_Init();
	uart_init();
	BUZZ_INIT
	//---------------------------------------------------------------------------------------
	
	//---------------------------------------------------------------------------------------
	//Global enable interrupts
	sei();
	
    while(1)
    {
		//---------------------------------------------------------------------------------------

		//---------------------------------------------------------------------------------------
		_delay_ms(50);
		//---------------------------------------------------------------------------------------
	};
};